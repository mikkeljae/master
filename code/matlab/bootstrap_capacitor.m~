clear all; close all; clc;

% Components: ISL83202IBZ, IPP045N10N3, Vishay US1M-E3/61T


VDD = 12;               %Supply voltage
fs = 22000;             %Switching
V_gsmin = 8             %Minimum allowed gate-source voltage;
D_min = 0.05;           %Minimum dutycycle
Q_gate = 117e-9;    %Total gate charge;
I_lkgs = 100e-9;    %Switch gate-source leakage current
I_lkcap = 0;            %Bootstrap capacitor leakage current. Zero if not electrolytic
I_qbs = -30e-6;       %Bootstrap circuit quiescent current
I_lk = 1e-6;        %Bootstrap circuit leakage current
Q_ls = 3e-9;        %Charge required by the internal level shifter
I_lkdiode = 10e-9;   %Diode leakage current 
t_on = 1/fs * D_min    %On time
V_f = 1.7;              %Bootstrap diode forward voltage drop


I_Q_test = (I_lkcap + I_lkgs + I_qbs + I_lk + I_lkdiode)*t_on
Q_total = Q_gate + (I_lkcap + I_lkgs + I_qbs + I_lk + I_lkdiode)*t_on + Q_ls

V_boot = VDD - V_f -V_gsmin

C_boot = Q_total / V_boot



%charge_current =  Q_gate * fs

%init_charge_time = 3/(C_boot * 12)

%c_current = 3e-3;
%Q_gate_max = c_current / fs

% 
% 
% VDD = 15;               %Supply voltage
% fs = 20000;             %Switching
% V_gsmin = 8             %Minimum allowed gate-source voltage;
% D_min = 0.5;           %Minimum dutycycle
% Q_gate = 98e-9;    %Total gate charge;
% I_lkgs = 100e-9;    %Switch gate-source leakage current
% I_lkcap = 0;            %Bootstrap capacitor leakage current. Zero if not electrolytic
% I_qbs = 120e-6;       %Bootstrap circuit quiescent current
% I_lk = 50e-6;        %Bootstrap circuit leakage current
% Q_ls = 3e-9;        %Charge required by the internal level shifter
% I_lkdiode = 10e-9;   %Diode leakage current 
% t_on = 1/fs * D_min    %On time
% V_f = 1.7;              %Bootstrap diode forward voltage drop
% 
% Q_total = Q_gate + (I_lkcap + I_lkgs + I_qbs + I_lk + I_lkdiode)*t_on + Q_ls
% 
% V_boot = VDD - V_f -V_gsmin
% 
% C_boot = Q_total / 1
% 
